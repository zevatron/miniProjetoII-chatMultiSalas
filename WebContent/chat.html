<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Websocket Chat</title>

<link
	href="https://stackpath.bootstrapcdn.com/bootswatch/4.1.1/materia/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-B7n8QuRe6UtnoLRAwGkku55zwnr4h8whf+ThXUwwlP9SaeNzHlGR4cOOuEZVMYOL"
	crossorigin="anonymous">
<link href="chat.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script>
	  $(function () {
		  var params = (new URL(document.location)).searchParams;
		  var sala = params.get("sala"); 
		  var user = params.get("nickname");
		  console.log(document.location.host);
		  var socket = new WebSocket("ws://" +document.location.host + "/chatMultiSalas/" +sala +"/"+user);
			$('form').submit(function() {
				if($('#m').val().length > 0){
					var msg = "send " + $('#m').val();
					socket.send(msg);
					$('#m').val('');					
				}
				return false;
			});

			socket.onmessage = function(event) {
				msg = event.data;
				$('#messages').append($('<li>').text(msg));
			};

		});
	</script>
</head>
<body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-9">
				<ul id="messages"></ul>

			</div>
			<div class="col-md-3">
				<h3>UsuÃ¡rios</h3>
				<div class="list-group">
				<ul>
						<li class="list-group-item list-group-item-action active">um</li>
						<li class="list-group-item list-group-item-action">dois</li>
						<li class="list-group-item list-group-item-action">tres</li>
					</ul>
					
				</div>
			</div>
		</div>
	</div>
	<form action="">
		<input id="m" autocomplete="off" autofocus="autofocus" />
		<button>Enviar</button>
	</form>
</body>
</html>